extends base
include mixins/aside-video

block content
    div.watch__container
        section.watch__left
            div#videoContainer(data-id=video._id)
                div#videoContainerOverlay
                video(src="/" + video.fileUrl, autoplay)
                div#videoControls.showing
                    div#timeline-row
                        input(type="range", step="1", value="0", min="0")#timeline
                    div#controller-row
                        div#controller-left
                            span#playPauseBtn.c-btn
                                i.fas.fa-pause
                            span#timeText
                                span#currentTime 00:00 
                                span / 
                                span#totalTime 00:00
                            span#volumeBtn.c-btn
                                i.fas.fa-volume-up
                            input#volumeRange(type="range", step="0.1", value="0.5", min="0" max="1")
                        div#controller-right
                            span#fullScreenBtn.c-btn
                                i.fas.fa-expand

            div 제목 : #{video.title}
            a(href=`/users/${video.author._id}`) 저자 : #{video.author.nickname}
            div 설명 : #{video.description}
            div 날짜 : #{new Date(video.createdAt).toLocaleDateString("ko-kr", {weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'})}

            if String(video.author._id) === String(loggedInUser._id)
                a(href=`${video._id}/edit`) 수정 &rarr;
                a(href=`${video._id}/delete`) 삭제 &rarr;

            if loggedIn
                div
                    form#commentForm
                        textarea#textarea(placeholder="댓글을 남겨주세요.")
                        button 등록

            div.video__comments
                span 댓글 
                span#commentsCount #{video.comments.length}
                span 개
                ul
                    each comment in video.comments.reverse()
                        li(data-id=comment._id)
                            i.fas.fa-comment
                            span #{comment.text}
                            if String(comment.author._id) === String(loggedInUser._id)
                                span.deleteBtn ❌
        nav.watch__right
            each video in asideVideos
                +video(video)

block scripts
    script(src="/static/js/videoPlayer.js")
    if loggedIn
        script(src="/static/js/commentSection.js")